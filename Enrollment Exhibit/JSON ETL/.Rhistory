?select
??select
?dplyr select
?dplyr::select
?read.json
??read json
source("U:/R/tomkit.R")
library(jsonlite)
library(reshape2)
library(dplyr)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_state_longitudinal]")
minmax <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_minmax]")
head(minmax)
head(mgp)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_longitudinal]")
head(mgp)
head(mgp,50)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_longitudinal]")
mgp <- subset(mgp, subgroup %notin% c("Not-LEP","Not-Economy","Not-SPED"))
head(mgp,50)
mgp$mgp_1yr[which(is.na(mgp$mgp_1yr))] <- 'null'
mgp$mgp_2yr[which(is.na(mgp$mgp_2yr))] <- 'null'
mgp$school_code <- sapply(mgp$school_code, leadgr, 4)
head(mgp,50)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_state_longitudinal]")
head(mgp,50)
minmax <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_minmax]")
mgp <- merge(mgp, minmax, by = c("year","subgroup","subject"), all.x=TRUE)
head(mgp,20)
table(mgp$subgroup)
mgp
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_state_longitudinal]")
source("U:/R/tomkit.R")
library(jsonlite)
library(reshape2)
library(dplyr)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_state_longitudinal]")
mgp <- subset(mgp, subgroup %notin% c("Not-LEP","Not-Economy","Not-SPED"))
mgp <- subset(mgp, group_fay_size >= 10)
mgp$mgp_1yr[which(is.na(mgp$mgp_1yr))] <- 'null'
mgp$mgp_2yr[which(is.na(mgp$mgp_2yr))] <- 'null'
mgp$school_code <- sapply(mgp$school_code, leadgr, 4)
key_index <- c(1,2,3)
value_index <- c(6,7)
table(mgp$school_code)
head(mgp)
source("U:/R/tomkit.R")
library(jsonlite)
library(reshape2)
library(dplyr)
mgp <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_state_longitudinal]")
minmax <- sqlQuery(dbrepcard, "SELECT * FROM [dbo].[mgp_minmax]")
dim(mgp)
dim(minmax)
mgp <- merge(mgp, minmax, by = c("year","subgroup","subject"), all.x=TRUE)
dim(mgp)
setwd("U:/LearnDC ETL V2/Enrollment Exhibit/JSON ETL")
source("U:/R/tomkit.R")
library(jsonlite)
state_enr <- sqlQuery(dbrepcard_prod, "SELECT * FROM [dbo].[enrollment_state_exhibit]")
state_enr <- subset(state_enr, enrollment >= 10)
head(state_enr)
state_enr <- sqlQuery(dbrepcard_prod, "SELECT * FROM [dbo].[enrollment_school_exhibit_mixed_values]")
state_enr <- subset(state_enr, enrollment >= 10 | (enrollment <= 1 & subgroup !="All"))
table(state_enr$subgroup)
state_enr <- sqlQuery(dbrepcard_prod, "SELECT * FROM [dbo].[enrollment_state_exhibit]")
state_enr <- subset(state_enr, enrollment >= 10)
table(state_enr$subgroup)
state_enr <- sqlQuery(dbrepcard_prod, "SELECT * FROM [dbo].[enrollment_school_exhibit_mixed_values]")
state_enr <- subset(state_enr, enrollment >= 10 | (enrollment <= 1 & subgroup !="All"))
head(state_enr)
state_enr <- sqlQuery(dbrepcard_prod, "SELECT * FROM [dbo].[enrollment_state_exhibit]")
state_enr <- subset(state_enr, enrollment >= 10)
table(state_enr$subgroup)
